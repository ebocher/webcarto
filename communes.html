<!DOCTYPE html>
<html>
    <head>
        <title>Evolutions démographique et géographique des communes de Loire-Atlantique depuis 1789</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="Cartographie de l'évolution des limites communales depuis 1789.">
        <meta name="author" content="Erwan Bocher and Gwendall Petit">


        <link rel="stylesheet" href="js/leaflet/core/leaflet.css" />
        <!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.ie.css" /><![endif]-->

        <script src="js/leaflet/core/leaflet.js"></script>
        <script src="js/jquery/jquery.min.js"></script>

        <!--Plugin geosearch-->
        <script src="js/leaflet/geosearch/js/l.control.geosearch.js"></script>
        <script src="js/leaflet/geosearch/js/l.geosearch.provider.openstreetmap.js"></script>
        <link rel="stylesheet" href="js/leaflet/geosearch/css/l.geosearch.css" />	


        <!--Plugin groupedlayer-->
        <script src="js/leaflet/groupedlayercontrol/js/leaflet.groupedlayercontrol.js"></script>
        <link rel="stylesheet" href="js/leaflet/groupedlayercontrol/css/leaflet.groupedlayercontrol.css" />

        <!--Plugin mouse position-->
        <script src="js/leaflet/mouseposition/js/L.Control.MousePosition.js"></script>
        <link rel="stylesheet" href="js/leaflet/mouseposition/css/L.Control.MousePosition.css" />

        <!--Plugin zoom center-->
        <link rel="stylesheet" href="js/leaflet/viewcenter/leaflet.viewcenter.css" />
        <script src="js/leaflet/viewcenter/leaflet.viewcenter.js"></script>

        <!-- Include the loading control -->
        <link rel="stylesheet" href="js/leaflet/loading/Control.Loading.css" />
        <script src="js/leaflet/loading/Control.Loading.js"></script>

        <!-- include jQuery -->
        <script src="js/jquery/jquery.min.js"></script>

        <!-- Then just attach the Reveal plugin -->
        <script src="js/jquery/reveal/jquery.reveal.js" type="text/javascript"></script>
        <!-- Then just attach the Reveal plugin -->
        <link rel="stylesheet" href="js/jquery/reveal/reveal.css">



        <!-- Global CSS for the page -->
        <link rel="stylesheet" href="css/main.css">


    </head>
    <body>
        <div class="logo">
            <img src="images/cartopolis_4.png" />
            <h1>Evolutions démographique et géographique des communes de Loire-Atlantique depuis 1789</h1>
        </div>
        <ul id="menuFilter">
            <li><a href="javascript:toggleDiv('legendBar');">Légende(s)</a></li>
            <li>
                <a href="#" data-reveal-id="about">A propos</a>
            </li>
            <li><a href="http://www.irstv.fr" target="_blank">En savoir plus</a></li>
        </ul>
        <!-- Ajout du cadre pour les legendes -->	
        <div id="legendBar">
        </div>

        <div id="map" style="position: absolute;  margin-top: 30px; left: 0; width: 100%; height: 100%;">
        </div>



        <script type="text/javascript">

            var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png';
            var basemap = new L.TileLayer(cloudmadeUrl, {maxZoom: 18});

            var map = new L.Map('map', {
                layers: [basemap],
                center: new L.LatLng(47.36, -1.61), zoom: 9
            });



            //Create a custom group of layers
            var baseLayers = {
                "Fond de carte": basemap
            };

            //Add some layers delivered with geoserver   	

            var communes_1794 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1794_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1794"
            });

            var communes_1806 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1806_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1806"
            });

            var communes_1836 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1836_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1836"
            });

            var communes_1866 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1866_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1866"
            });

            var communes_1896 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1896_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1896"
            });


            var communes_1911 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1911_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1911"
            });

            var communes_1946 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1946_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1946"
            });

            var communes_1962 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1962_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1962"
            });

            var communes_1982 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1982_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1982"
            });

            var communes_1999 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_1999_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 1999"
            });

            var communes_2006 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_2006_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 2006"
            });

            var communes_2010 = L.tileLayer.wms("http://www.cartopolis.org/geoserver/IRSTV/wms", {
                layers: 'IRSTV:communes_44_2010_1_1_snapshot',
                format: 'image/png',
                transparent: true,
                version: '1.1.0',
                attribution: "Les communes en 2010"
            });

            map.addLayer(communes_1794);


            // Overlay layers are grouped
            var groupedOverlays = {
                "Limite communale": {
                    "en 1794": communes_1794,
                    "en 1806": communes_1806,
                    "en 1836": communes_1836,
                    "en 1866": communes_1866,
                    "en 1896": communes_1896,
                    "en 1911": communes_1911,
                    "en 1946": communes_1946,
                    "en 1962": communes_1962,
                    "en 1982": communes_1982,
                    "en 1999": communes_1999,
                    "en 2006": communes_2006,
                    "en 2010": communes_2010
                }
            };

            //Load the group layers plugin
            new L.control.groupedLayers(baseLayers, groupedOverlays).addTo(map);

            //Load mouse position plugin
            new L.control.mousePosition().addTo(map);

            //Load the geosearch plugin
            new L.Control.GeoSearch({
                provider: new L.GeoSearch.Provider.OpenStreetMap()
            }).addTo(map);

            //Load the view center control
            var viewCenter = new L.Control.ViewCenter({title: 'Zoom sur la Ville de Nantes', vcLatLng: [47.36, -1.61], vcZoom: 9});
            map.addControl(viewCenter);

            // Add our loading control in the same position and pass the
            // zoom control to attach to it
            var loadingControl = L.Control.loading({
                position: 'topright', separate: true
            });
            map.addControl(loadingControl);

            //Create a legend for noise map
            legend1 = function() {
                var div = L.DomUtil.create('div', 'info legend'), labels = ["<h6>Densité<br> de population<br> (hab/km²)</h6>"];
                div.innerHTML = labels.join('');
                div.innerHTML += '<img src="http://www.cartopolis.org/geoserver/IRSTV/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=IRSTV:communes_44_1789_1_1_snapshot" alt="legend" width="84" height="120">';
                return div;
            };

            //Add the legends to the legend frame
            $("#legendBar").html(legend1);


        </script>

        <!-- Show hide the legend frame -->
        <script type="text/javascript">
            function toggleDiv(divId, divId1) {
                $("#" + divId).fadeToggle('slow');
            }
        </script>

        <div id="about" class="reveal-modal">
            <a href="http://www.cartopolis.org"><img src="images/cartopolis_logo.png" width="50" alt="CartoPOLIS" style="float: right; margin: 50px 0 0 20px;" /></a>
            <h2>A propos de l'évolution démographique et géographique des communes</h2>
            <p>Les resultats présentés dans ce navigateur sont issus du projet de recherche <strong>GEBD - Belgrand (Grand Equipement Base de Données)</strong> piloté par l'IFSTTAR.</p>
            <p>Les données exploitées pour produire les cartes sont stockées dans un modèle de données spatio-temporel. Ce modèle a été developpé par l'équipe de
                l'Atelier SIG de l'IRSTV. Il utilise la base de données relationnelle PostgreSQL et son cartouche spatiale PostGIS.</p>
            <p>Les données démographiques communales son issues de l'exploitation des fiches du site internet 
                <a href="http://cassini.ehess.fr" target="blank" title="Cassini EHESS"><u>"Des villages de Cassini aux communes d'aujourd'hui"</u></a> 
                ainsi que des tableaux de recensemment de la population de l' <a href="http://www.insee.fr" target="blank" title="INSEE"><u>INSEE</u></a></p>
            <p>Les auteurs déclinent toute responsabilité concernant l'interprétation qui pourrait en être faite.</p>
            <p>              
            <p>
                <strong>En savoir plus ?</strong> Visitez <a href="http://belgrand-gebd.ifsttar.fr/" target="blank" title="Belgrand"><u>la page du programme de recherche Belgrand.</u>.</a>
            </p>
            <a class="close-reveal-modal">×</a>
        </div>
        <div class="reveal-modal-bg"></div>


    </body>
</html>
